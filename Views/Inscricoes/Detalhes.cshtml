@using System.Collections.Generic;
@using System.Linq;
@using Utils.Enums;
@using Utils.Extensions;
@{
    Layout = "~/Views/Shared/_Inscricoes.cshtml";
}

@if ((int)ViewBag.Evento.Status != 16)
{



    <div class="event-banner">
        <div class="bg-wrapper">
        </div>
        <img class="bg" src="/@ViewBag.Configuracao.Identificador/background" />
        <div class="invisible-border"></div>
    </div>
    <div class="event">


        <div class="info-evento">
            <div class="title">@(ViewBag.Evento.Numeracao)º @ViewBag.Configuracao.Titulo</div>
            <div class="perfil-evento">
                <div class="icon">
                    <i class="far fa-calendar"></i>
                </div>
                <div class="content">
                    @if (!string.IsNullOrEmpty(ViewBag.Evento.DataExtenso))
                    {
                        <p>@ViewBag.Evento.DataExtenso</p>
                    }
                    else
                    {

                        <p>@ViewBag.Evento.DataEvento.ToString("dd") de @ViewBag.Evento.DataEvento.ToString("MMMM") de @ViewBag.Evento.DataEvento.ToString("yyyy")</p>
                    }
                </div>
            </div>
            <div class="perfil-evento">
                <div class="icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="content">
                    <p>
                        <a style="text-decoration: underline;" class="link-local" href="@ViewBag.Evento.LinkLocal" target="_blank">@ViewBag.Evento.NomeLocal</a>
                    </p>
                </div>
            </div>
            @if (!string.IsNullOrEmpty(ViewBag.Evento.FaixaEtaria))
            {
                <div class="perfil-evento">
                    <div class="icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="content">
                        <p>
                            @ViewBag.Evento.FaixaEtaria
                        </p>
                    </div>
                </div>
            }
        </div>

    </div>
    <div class="divider"></div>

    if (!String.IsNullOrEmpty(ViewBag.Evento.Conteudo))
    {
        <div class="event">
            <iframe style="border:0;" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';" srcdoc="<div style='padding-right:20px;padding-bottom:40px' class='note-editor note-frame'><div class='note-editing-area'><div class='note-editable'>@Html.Raw(ViewBag.Evento.Conteudo.Replace("\"", "'"))</div></div></div><style>.note-editor.note-airframe .note-editing-area .note-editable, .note-editor.note-frame .note-editing-area .note-editable { padding-right: 20px; } .note-editor.note-airframe, .note-editor.note-frame { border: 0 !important;} body {margin:0; font-family: ' open sans', 'Helvetica Neue' , Helvetica, Arial, sans-serif !important;} .note-editor {height: auto !important;}.note-editor.fullscreen {z-index: 2050;}.note-editor.note-frame.fullscreen {z-index: 2020;}.note-editor.note-frame .note-editing-area .note-editable {color: #676a6c;padding: 15px;}.note-editor.note-frame {border: none;}.note-editor.panel {margin-bottom: 0;}</style><link href='https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css' rel='stylesheet'>"></iframe>
        </div>
    }

    <div class="event">

        <div class="fixed-footer">
            @if ((int)ViewBag.Evento.Status == 4 && (int)ViewBag.Evento.StatusEquipe == 4)
            {

                <span onclick="$('#modal-decisao').modal()" class="btn btn-juventude mt-5">Inscreva-se já</span>
            }
            else if ((int)ViewBag.Evento.Status == 4 && (int)ViewBag.Evento.StatusEquipe != 4)
            {
                <span onclick="window.location.href = '/Inscricoes/Inscricoes/@ViewBag.EventoId?Tipo=Inscrições'" class="btn btn-juventude mt-5">Inscreva-se já</span>
            }
            else
            {
                <span onclick="window.location.href = '/Inscricoes/Inscricoes/@ViewBag.EventoId?Tipo=Inscrições Equipe'" class="btn btn-juventude mt-5">Inscreva-se já</span>
            }
        </div>
    </div>


    <div class="modal inmodal" id="modal-decisao" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content animated bounceInRight">
                <div class="modal-body">

                    <div class="decisao" onclick="window.location.href = '/Inscricoes/Inscricoes/@ViewBag.EventoId?Tipo=Inscrições'">
                        <i class="fas fa-qrcode"></i>
                        <div>
                            <p>
                                <strong>
                                    Quero me inscrever
                                </strong>
                            </p>
                            <small>Você irá participar das atividades regulares do evento</small>
                        </div>
                    </div>
                    <div class="decisao" onclick="window.location.href = '/Inscricoes/Inscricoes/@ViewBag.EventoId?Tipo=Inscrições Equipe'">

                        <i class="fas fa-broom"></i>
                        <div>
                            <p>
                                <strong>
                                    Quero ser voluntário
                                </strong>
                            </p>
                            <small>Você irá contribuir com a equipe de trabalho do evento</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}
else if (!String.IsNullOrEmpty(ViewBag.Evento.Conteudo))
{
    <div class="event">
        <iframe style="border:0;" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';" srcdoc="<div style='padding-right:20px;padding-bottom:40px' class='note-editor note-frame'><div class='note-editing-area'><div class='note-editable'>@Html.Raw(ViewBag.Evento.Conteudo.Replace("\"", "'"))</div></div></div><style>.note-editor.note-airframe .note-editing-area .note-editable, .note-editor.note-frame .note-editing-area .note-editable { padding-right: 20px; } .note-editor.note-airframe, .note-editor.note-frame { border: 0 !important;} body {margin:0; font-family: ' open sans', 'Helvetica Neue' , Helvetica, Arial, sans-serif !important;} .note-editor {height: auto !important;}.note-editor.fullscreen {z-index: 2050;}.note-editor.note-frame.fullscreen {z-index: 2020;}.note-editor.note-frame .note-editing-area .note-editable {color: #676a6c;padding: 15px;}.note-editor.note-frame {border: none;}.note-editor.panel {margin-bottom: 0;}</style><link href='https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css' rel='stylesheet'>"></iframe>
    </div>
}


<style>
    @@media (min-width: 768px) {
        .invisible-border {
            background: #fff;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 10px;
            z-index: 0;
        }
        .event-banner {
            position: relative;
            display: flex;
            justify-content: center;
        }

        .bg-wrapper {
            background-image: linear-gradient(180deg, rgba(0, 0, 0, .2), rgba(0, 0, 0, .2)), url('/@ViewBag.Configuracao.Identificador/background');
            position: absolute;
            z-index: -1;
            bottom: -10%;
            top: -40%;
            left: -10%;
            right: -10%;
            filter: blur(24px);
            background-size: auto, cover;
            background-repeat: repeat-y;
        }

        .bg {
            height: 380px;
            max-width: 670px;
            border-radius: 16px;
            margin-top: -10px;
            z-index: 1;
        }

        .info-evento, iframe, .btn-juventude {
            margin: 0 auto !important;
            width: 670px !important;
        }
    }

    @@media (max-width: 768px) {
        .bg {
            width: 100%;
        }

        .info-evento {
            justify-content: flex-start;
            left: 0;
            right: 0;
        }

        iframe {
            width: 100%;
        }
    }

    .event, iframe, .fixed-footer {
        background: #fff;
    }

    .event {
        display: flex;
    }



    .divider {
        border-bottom: 1px solid #dde0e4;
        left:0;
        right:0;
    }

    .fixed-footer {
        border-top: 1px solid #dde0e4;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0;
        border-radius: 0;
        z-index: 2;
        padding: 16px;
        display: flex;

    }

        .fixed-footer span {
            margin: 0 auto;
            width: 100%;
            font-size: 14px;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
    .info-evento {
        display: flex;
        flex-direction: column;

        padding: 10px;


        z-index: 1;

    }

        .info-evento .title {
            font-weight: bold;
            font-size: 20px;
            min-height: 30px;
        }

    .corpo-inscricoes {
        flex-direction: column;
        padding-left: 15px;
    }

    .perfil-evento {
        display: flex;
        gap: 5px;
        height: 40px;
        justify-content: start;
        align-items: center;
    }

        .perfil-evento .icon {
            width: 25px;
            font-size: 15px;
            padding-top: 2px;
            color: #a5a6a7;
            display: flex;
        }

            .perfil-evento .icon i {
                margin: auto;
            }

        .perfil-evento .content {
            font-size: 0.875rem;
        }

            .perfil-evento .content p {
                margin: 0;
            }

    .modal-body {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .decisao {
        background: #fff;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: start;
        gap: 20px;
        cursor: pointer;
        box-shadow: rgb(25 31 40 / 15%) 0px 6px 24px 0px;
    }

        .decisao i {
            font-size: 30px;
        }

        .decisao p {
            margin: 0;
        }
</style>


@section scripts {
    <script>

        $(window).on('load', function () {
            $('#preloader').fadeOut();
        })
    </script>

}
